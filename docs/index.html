<style type="text/css">
	html {
		background-color:#f2f2f2;
	}
	body {
		background-color:#f2f2f2;
	}
	.main {
		display: flex;
		flex-flow: row;
		align-content: center;
		justify-content: center;
		width:100%;
	}
	.sidebar {
		width:300px;
		height:100%;
		padding-right:10px;
	}
	.sidebarHeader {
		background:-webkit-linear-gradient(top, #373737, #212121);
		font-size:24px;
		color:white;
		padding:5px;
		font-family:Courier New, Courier, monospace;
	}
	.sidebarList {
		overflow-x:scroll;
		background-color:#f2f2f2;
	}
	.sidebarElement {
		border: 1px solid lightgrey;
		border-radius: 5px;
		cursor: pointer;
		padding: 5px;
		font-size: 15px;
		font-family: monospace;
		font-weight: bold;
		color:black;
		user-select:none;
	}
	.sidebarElement:hover {
		border: 1px solid black;
		color:dimgrey;
		background-color:lightgrey;
	}
	.content {
		width:100%;
	}
</style>
<div class="main">
	<div class="sidebar">
		<div id="sidebarHeader" class="sidebarHeader">
			Differentia.js
			<br>
			Documentation
		</div>
		<div id="sidebarList" class="sidebarList"></div>
	</div>
	<div id="pageContainer" class="content"></div>
</div>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/skeleton/2.0.4/skeleton.css"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/markdown-it/8.4.0/markdown-it.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.4.0/languages/javascript.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
<script type="text/javascript">
	window.addEventListener("load", function () {
		function ajax(url = "/", verb = "GET", data = null) {
			return new Promise(function (resolve, reject) {
				const req = new XMLHttpRequest();
				req.onreadystatechange = function () {
					if (req.readyState === 4) {
						if (req.status >= 200 && req.status < 400) {
							resolve(req.response);
						} else {
							reject(new Error("XHR HTTP Error " + req.status + ": " + req.statusText));
						}
					}
				};
				req.open(verb, url);
				req.responseType = "text";
				req.setRequestHeader("X-Requested-With", "XMLHttpRequest");
				req.send(data);
			});
		}
		function loadPage(title) {
			ajax(title + ".md").then(function (markdown) {
				while(pageContainer.hasChildNodes()) pageContainer.removeChild(pageContainer.lastChild);
				pageContainer.appendChild(document.createRange().createContextualFragment(mdParser.render(markdown)));
				pageContainer.querySelectorAll("code").forEach(element => hljs.highlight("JavaScript", element));
			});
		}
		const mdParser = markdownit();
		const pageContainer = document.getElementById("pageContainer");
		const elementTemplate = document.createElement("div");
		elementTemplate.setAttribute("class", "sidebarElement")
		const sidebarList = document.getElementById("sidebarList");
		document.getElementById("sidebarHeader").addEventListener("click", () => loadPage("home"));
		loadPage("home");
		ajax("index.json").then(function (body) {
			const titles = JSON.parse(body);
			titles.forEach(function (title) {
				const template = elementTemplate.cloneNode(true);
				template.insertAdjacentText("afterbegin", title);
				sidebarList.appendChild(template);
				template.addEventListener("click", () => loadPage(title));
			});
		});
	});
</script>